# 6. 解析結果をダウンロード

解析結果は、AWSのS3上にあるので、手元にもってきます。

その際の注意点としては、AWSから、手元にデータをもってくるときは、料金がかかります。ですので、巨大なファイルをダウンロードするときはご注意ください。

## 6.1. sync コマンドの注意点

データをダウンロードする際、S3のフォルダを指定しますが、ローカルには、指定したフォルダの中身がダウンロードされます。

そのため、あらかじめ、出力結果をいれるディレクトリを作っておき、そこに対して`s3 sync`コマンドを実行すると、出力結果が、指定したディレクトリに格納されます。

## 6.2. 実際にダウンロードする

出力結果をS3から、ローカルにダウンロードします。

出力結果が以下にあるとします。

```text
s3://test-bucket/result/20200707-1
```

この場合以下のようにすることで、`s3://test-bucket/result/20200707-1` にあるものをすべて、`result-20200707-1`にダウンロードします。

```console
aws-GAJ s3 sync s3://test-bucket/result/20200707-1 result-20200707-1
```

もし特定のファイルだけダウンロードしたいときは、以下のようにすると
現在のディレクトリに、`result.txt`という名前のファイルがS3から取得されます。

```console
aws-GAJ s3 sync s3://test-bucket/result/20200707-1/result.txt .
```

## 6.3. S3の料金に関して

参考、公式ドキュメント

- [料金 \- Amazon S3 ｜AWS](https://aws.amazon.com/jp/s3/pricing/)

AWSへの転送量は現在無料ですが、
AWSから手元へデータをもってくることや、AWSのS3にデータを置き続けることにはお金がかかります。
その点ご注意ください。
いくつか参考情報をまとめてみました。

### 6.3.1. AWSから手元への転送料金

AWSから手元のコンピュータへデータを持ってくるときに料金がかかります。
ですので、大きなファイルをダウンロードするときなどは料金にもお気をつけください。

東京リージョンでは、20200703現在
Amazon S3 からインターネットへのデータ転送（アウト）
の料金は、

- 9.999TB/月 0.114USD/GB

ですので、

- 500GBで、おおよそ57USD、 6124円
- 1TBで、おおよそ114USD、 12250円

となります。

### 6.3.2. S3に保存しておく料金

東京リージョンでは、20200703現在

- 最初の 50 TB/月0.025USD/GB

なので、

- 1GBでは、0.025USD おおよそ、2.69円
- 1TBでは、25USD おおよそ、2690円

となります。

解析がおわって必要がない場合は、よりやすいGlacierに移すか、消して問題がないものは消してしまうのがおすすめです。

### 6.3.3. その他の一般的な注意点

#### 6.3.3.1. AWSから手元に持ってこなくても良いようなファイル

ソートしたBAMなど、手元でも作れるような場合など、手元で作成できるものを、手元にダウンロードする際にはお気をつけください。

#### 6.3.3.2. S3上のデータを異なるAWSのリージョンで扱うとき

S3のデータをAWSのEC2（仮想マシン）へ、ダウンロードするのは通常料金は
異なるリージョンへの転送も料金がかかります

東京リージョンからの場合は、20200703現在

- 別のリージョンへの転送は 0.09USD/GB かかります。

ですので、入力データのアップロード先のリージョンと、計算機のリージョンは同じにしておくと良いと思います。
